---
layout:     post
title:      Hive 安装
subtitle:   
date:       2019-05-03
author:     danner
header-img: img/post-bg-ios9-web.jpg
catalog: true
tags:
    - bigdata
    - Hive
---

`Hive` 的元数据需要保存在 `MySQL`，先安装 `MySQL`。


### MySQL

安装 `mysql`

>	yum -y install mysql-server mysql

启动 `mysql`

> /etc/init.d/mysqld start <br>
	chkconfig mysqld on

设置 `mysql` 的 `root` 用户密码

>	mysqladmin -u root password 123456

`root` 用户登陆 `mysql`

>	mysql -uroot -p123456
	
设置 `mysql` 权限

	use mysql;
	GRANT ALL PRIVILEGES ON *.* TO 'root'@'localhost' IDENTIFIED BY 'v123456' WITH GRANT OPTION;
	GRANT ALL PRIVILEGES ON *.* TO 'root'@'127.0.0.1' IDENTIFIED BY '123456' WITH GRANT OPTION;
	GRANT ALL PRIVILEGES ON *.* TO 'root'@'%' IDENTIFIED BY '123456' WITH GRANT OPTION;
	update user set password=password('123456') where user='root';
	delete from user where not (user='root') ;
	delete from user where user='root' and password=''; 
	drop database test;
	DROP USER ''@'%';
	flush privileges;


### Hive

> http://archive.cloudera.com/cdh5/cdh/5/hive-1.1.0-cdh5.15.1.tar.gz 下载地址

解压设置换变量不说了，直接看**配置**


#### 拷贝 `mysql jar`

`hive` 需要使用 `mysql`，先拷贝 `jar`(`mysql-connector-java-5.1.45-bin.jar`,自行下载) 到 `hive` 的 `lib` 下


#### 配置文件

`hive-env.sh`

	cp hive-env.sh.template hive-env.sh
	vi hive-env.sh
	# 配置 hadoop home
	HADOOP_HOME=/home/hadoop/app/hadoop-2.6.0-cdh5.15.1


`hive-site.xml`

	vi hive-site.xml

	<?xml version="1.0"?>
	<?xml-stylesheet type="text/xsl" href="configuration.xsl"?>
	<configuration> 
	    <property>
	        <name>javax.jdo.option.ConnectionURL</name>
	        <value>jdbc:mysql://localhost:3306/hive?createDatabaseIfNotExist=true</value>
	    </property>
	
	    <property>
	        <name>javax.jdo.option.ConnectionDriverName</name>
	        <value>com.mysql.jdbc.Driver</value>
	    </property>
		<!-- 设置范文 mysql 账密-->
	    <property>
	        <name>javax.jdo.option.ConnectionUserName</name>
	        <value>root</value>
	    </property>
	    <property>
	        <name>javax.jdo.option.ConnectionPassword</name>
	        <value>123456</value>
	    </property>
	</configuration>


#### 启动

执行 `hive` 即可


> hive -hiveconf hive.root.logger=DEBUG,console // 输出更多日志




## 参考资料

[Hive全网最详细的编译及部署](https://ruozedata.github.io/2018/04/11/Hive%E5%85%A8%E7%BD%91%E6%9C%80%E8%AF%A6%E7%BB%86%E7%9A%84%E7%BC%96%E8%AF%91%E5%8F%8A%E9%83%A8%E7%BD%B2/)