---
layout:     post
title:      kafka 笔记
subtitle:   
date:       2019-10-20
author:     danner
header-img: img/post-bg-ios9-web.jpg
catalog: true
tags:
    - kafka
    - bigdata

---

### 核心术语

- **Producer**：生产者，实际中常为 `flume`
- **Consumer**：消费者，实际中常为 `ss/sss/flink/`
  - 容错性的消费机制：
    - 一个消费组内共享一个公共的消费 group id；
    - 组内所有的消费者协调在一起消费**指定 Topic** 的所有分区；
    - 每个分区只能由一个消费组的一个消费者来消费，绝不会出现一个分区被同一个消费者的不同消费者进行重复消费
  - ![](https://vendanner.github.io/img/kafka/consumer_group.png)
- **broker**：消息处理节点(`kafka` 集群节点)
- **Topic**：消息主题，数据记录发布的地方；
- **Partition**：`topic` **物理上**的分组
  - 一个 `topic` 可以指定多个分区，提高并行度；
  - 每个分区是一个**有序**队列，其实就是一个文件夹/目录
  - 分区命名规则为 主题名-序号，比如 `test-0`，`test-1`，`test-2`
- **Segment**：分段
  - 一个分区可以被切割为多个**相同大小**的 `segment`
  - 分区全局的第一个 `segment` 必然是从0开始，后续的 `segment` 名称为上一个 `segment` 的最后一个消息的 **offset** 来标识
  - `segment` 的切割由 `log.segment.bytes`  来决定
- **replication-factor**：副本数
  - 分区会指定复制几份和 `HDFS` 的 `block` 副本数类似，提高容错性，常用为 3

### 