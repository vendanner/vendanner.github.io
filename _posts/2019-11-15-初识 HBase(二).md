---
layout:     post
title:      初识 HBase(二)
subtitle:   
date:       2019-11-15
author:     danner
header-img: img/post-bg-ios9-web.jpg
catalog: true
tags:
    - HBase
    - bigdata
---

在[上一节]( https://vendanner.github.io/2019/11/08/初识-HBase/ ) 大致了解 `HBase` 框架，本节补充知识点。

![](https://vendanner.github.io/img/HBase/HBase-arch.png)

- `HLog`：Write Ahead Log，预写日志(节点上所有region 的写操作)
- `memstore`：先写 HLog，再写memStore
  - 超过**阈值**会 flush 成一个 `storeFile`(flush 影响性能)
  - 当 `storeFile`文件数量增加到一定阈值，会触发 **compaction 合并**(会发生GC)
- `storeFile`：小的file **合并**成大文件，文件大小超过阈值又会**分裂**
- `blockCache`：**读缓存**，`RegionServer` 上所有 region 共享；系统启动时完成初始化工作



### 写流程

![](https://vendanner.github.io/img/HBase/write_step.png)

