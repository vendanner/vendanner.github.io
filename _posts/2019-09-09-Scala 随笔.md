---
layout:     post
title:      Scala 随笔
subtitle:   
date:       2019-09-09
author:     danner
header-img: img/post-bg-ios9-web.jpg
catalog: true
tags:
    - Scala
    - program language
---

> https://docs.scala-lang.org/zh-cn/tour/higher-order-functions.html


### case class

`case class` 样例类，必须要有**参数列表**；`case object` 样例对象，必须**不能加参数列表**。案例类非常适合用于**不可变**的数据，`Spark` 中常用 `case class` 来存储信息。`case class` 相比于 `class` 有什么不同(以下这些都是**编译器**实现)：

- `case class` 重写了 `toString`、`equals`、`hashCode`
- `case class` 默认就实现了**序列化**
- `case class` 不用 `new`，有一个默认的 `apply` 方法来负责对象的创建
- `case class` 的 `copy` 内部实现是 `new` 对象 

<br>

	object CaseClassApp {
		def main(args: Array[String]): Unit = {
		    println(Dog("john").name)
		}
		
		case class Dog(name:String)
	}

`case class` **按值比较**

	object CaseClassApp {
		def main(args: Array[String]): Unit = {
		    val dog1 = Dog("john")
		    val dog2 = Dog("john")
		    println(dog1 == dog2) // true
		}
		
		case class Dog(name:String)
	}


### 柯里化

> 一个接受多个参数的函数分解成一系列的函数，每个函数只接受**一个**参数，这个过程叫做柯里化。

`currying` 最大的意义在于把**多个参数**的函数等价转化成**多个单参数**函数的**级联**，这样所有的函数就都统一了，方便做 `lambda` 演算。

	object Currying {
		def main(args: Array[String]): Unit = {
		
		    // 参数必须分开写
		    def sum(a:Int)(b:Int) = a + b
		
		    // 柯里化产生新的函数 sum9
		    // 此函数功能：形参 + 9
		    val sum9 = sum(9)_  //还有参数必须加 "_"
		    
		    println(sum9(5))    // 14
		    println(sum9(10))   // 19
		}
	}

下面来看看 `currying` 的演化，省得下次看到不认识

	// 以下四个函数的作用都是两者之和
	scala> def sum(x:Int,y:Int) = x + y
	sum: (x: Int, y: Int)Int
	
	scala> def sum = (x:Int,y:Int) => x + y
	sum: (Int, Int) => Int
	
	scala> def sum(x:Int)(y:Int) = x + y
	sum: (x: Int)(y: Int)Int
	
	scala> def sum = (x:Int) => (y:Int) => x + y
	sum: Int => (Int => Int)



### 偏函数

> `PartialFunction`：包在花括号内没有 `match` 的 `case` 语句；重点理解

偏函数接收一个类型为A的参数，返回类型为B的值

	object PartialFunctionApp {
	    def main(args: Array[String]): Unit = {
	
	        val names = Array("li","wang","zhang")
	        val name = names(new Random().nextInt(names.length))
	
	        def say:PartialFunction[String,String] = {
	            case "li" => "name is  li"
	            case "wang" => "name is wang"
	            case "zhang" => "name is zhang"
	            case _ => "no"
	        }
	        println(say(name))
	    }
	}



### 隐式参数

### 泛型

### `JDBC`

## 参考资料

[深入理解scala的柯里化( currying or curry )以及其用处](https://blog.csdn.net/onwingsofsong/article/details/77822920)<br>
[偏函数 vs 部分应用函数 vs 柯里化](http://songkun.me/2018/05/16/scala-partialfunction-partially-applied-function-currying/)